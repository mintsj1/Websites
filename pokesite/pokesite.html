<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokesite</title>
    <link rel="stylesheet" href="stylesheet.css">
</head>
<body>
    <h1>
        PokeSite
    </h1>


    <script>
    async function getData() {
    const url = "https://pokeapi.co/api/v2/pokemon?limit=10&offset=3";
        try {
            const response = await fetch(url);
            if (!response.ok) {
                throw new Error(`Response status: ${response.status}`);
            }

            const data = await response.json();
            displayPokelist(data.results);
            } catch (error) {
            console.error(error.message);
        }
    }
    getData();

    
    function displayPokelist(data) {
        const list = document.createElement(`select`);

        for (const poke of data) {
            const item = document.createElement("option");
            item.innerHTML = poke.name;
            //Add an event listener to each Pokemon to listen for a click
            list.addEventListener("change", () => {
                onePokemon(poke.url)
            })
            list.appendChild(item);
        } 
        
        document.body.appendChild(list);
    }

//Write a function that will trigger when the user clicks a specific Pokemon. 
//Fetch the data for that Pokemon from the API

    async function onePokemon(url){
        try {
            const response = await fetch(url);
            if (!response.ok) {
                throw new Error(`Response status: ${response.status}`);
            }

            const data = await response.json();
            displayIndividual(data);
            } catch (error) {
            console.error(error.message);
        }
    }
    
    const div = document.createElement("div");
    document.body.appendChild(div);

    function displayIndividual(data){
        div.innerHTML = `<h2>${data.name}</h2>
        <img src="${data.sprites.front_default}" alt="${data.name}">
        <img src="${data.sprites.front_shiny}" alt="${data.name}">`;
    }



    </script>
</body>
</html>